<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="./src/js/firebase.js" defer type="module"></script>
  <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="./src/css/style.css">
  <link rel="stylesheet" href="./src/css/utils.css">
  <link rel="stylesheet" href="./src/css/responsive.css">
  <title>Login</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }

    body {
      background: white;
      /*       display: flex; */
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      /*       padding: 20px; */
      overflow-x: hidden;
    }

    .container {
      background: white;
      padding: 2rem;
      border-radius: 12px;
      width: 100%;
      max-width: 400px;
      box-shadow: 0 8px 150px rgba(0, 0, 0, 0.15);
      border: 1px solid #ccc;
      font-weight: 500;
    }


    h2 {
      text-align: center;
      margin-bottom: 1rem;
    }

    .form-group {
      margin-bottom: 1rem;
      position: relative;
    }

    label {
      display: block;
      margin-bottom: 5px;
    }

    input[type="email"],
    input[type="password"],
    input[type="text"] {
      width: 100%;
      padding: 10px;
      padding-right: 40px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    .toggle-password {
      position: absolute;
      right: 10px;
      top: 38px;
      cursor: pointer;
      color: #555;
    }

    .inline-feedback {
      font-size: 0.85rem;
      color: red;
      margin-top: 5px;
    }

    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }

    .forgot-password {
      display: block;
      text-align: right;
      margin-bottom: 1rem;
      font-size: 0.9rem;
      color: black;
      text-decoration: none;
    }

    .signup-page {
      display: block;
      text-align: center;
      margin-bottom: 1rem;
      font-size: 0.9rem;
      color: black;
      text-decoration: none;
      margin-top: 1rem;
    }

    .btn {
      width: 100%;
      padding: 10px;
      border: none;
      border-radius: 6px;
      background-color: #0a0a0a;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }

    .btn:disabled {
      background-color: #999;
    }

    .spinner {
      display: none;
      width: 24px;
      height: 24px;
      margin: 0 auto;
      border: 3px solid #f3f3f3;
      border-top: 3px solid black;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-top: 1rem;
    }


    .divider {
      display: flex;
      align-items: center;
      text-align: center;
      margin: 20px 0;
      /* spacing between login and google button */
    }

    .divider::before,
    .divider::after {
      content: '';
      flex: 1;
      border-bottom: 1px solid #ccc;
      /* gray line */
    }

    .divider:not(:empty)::before {
      margin-right: 10px;
    }

    .divider:not(:empty)::after {
      margin-left: 10px;
    }

    .divider span {
      color: #888;
      font-size: 14px;
      white-space: nowrap;
    }

    /* Google Button */
    .google-btn {
      display: flex;
      text-align: center;
      justify-content: center;
      gap: 8px;
      width: 100%;
      background-color: white !important;
      color: #3c4043 !important;
      border: 1px solid #dadce0;
      border-radius: 7px !important;
      padding: 10px;
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 12px;
      cursor: pointer;
      box-shadow: 0 5px 5px rgba(0, 0, 0, 0.1);
      transition: box-shadow 0.3s ease;
    }


    .google-btn:hover {
       box-shadow:none;
    }

    .google-icon {
      width: 20px;
      height: 20px;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    .social-buttons {
      display: flex;
      gap: 10px;
      align-items: center;
      justify-content: center;
      margin: 1rem auto;      
      width: fit-content;
    }

    .social-btn {
      /* flex: 1; */
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
      text-align: center;
      cursor: pointer;
      font-size: 0.85rem;
    }

    .nav-hamburger{
      cursor: pointer;
    }
    .logo-container{
      display: flex;
      justify-content: center;
      align-items: center;
      padding-left: 12px;
      margin: 10px 2px;
      
    }
    #navbar-links{
      display: flex;
      align-items: center;
      gap: 2px;
      justify-content: space-between;
      white-space: nowrap;
      align-items: center;
    }
  </style>
</head>

<body>
  <div class="navbar">
    <div class="logo-container">
      <a href="./"><img id="navbar-logo" width="80px" src="./assets/images/logo-nav-light.png" alt="logo Creators-Space"></a>
      <h1><a href="./">Creators-Space</a></h1>
    </div>
    
    <div id="navbar-links" class="nav-links align-items-center">
      <a href="index.html">Home</a>
      <a href="about.html">About Us</a>
      <a href="courses.html">Courses</a>
      <a href="services.html" class="active">Services</a>
      <a href="internship.html">Internship</a>
      <a href="campus-ambassador.html">Campus Ambassador</a>
      <a href="blog.html">Blog</a>
      <a href="bookmarked.html">BookMarks</a>
      <a href="./login.html" class="btn login">Log In</a>
      <a href="./signup.html" class="btn signup">Sign Up</a>
    </div>
    <div class="nav-toggle align-items-center justify-content-center" onclick="toggleNav()">
      <svg viewBox="0 0 18 18" id="navbar-barger-logo" class="nav-hamburger">
        <polyline id="globalnav-menutrigger-bread-bottom" fill="none" stroke="currentColor" stroke-width="1.2"
          stroke-linecap="round" stroke-linejoin="round" points="2 12, 16 12"
          class="globalnav-menutrigger-bread globalnav-menutrigger-bread-bottom"></polyline>
        <polyline id="globalnav-menutrigger-bread-top" fill="none" stroke="currentColor" stroke-width="1.2"
          stroke-linecap="round" stroke-linejoin="round" points="2 5, 16 5"
          class="globalnav-menutrigger-bread globalnav-menutrigger-bread-top"></polyline>
      </svg>
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" id="navbar-x-logo" class="bi bi-x-lg d-none"
        viewBox="0 0 16 16">
        <path
          d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z" />
      </svg>
    </div>
  </div>
  <br><br>
  <div class="container">
    <a href="index.html"
      style="display: inline-block; margin-bottom: 10px; font-size: 14px; color: #555; text-decoration: none;">
      ‚Üê Back to Homepage
    </a>
    <h2>Login</h2>
    <form id="Login-form">
      <div class="form-group">
        <label>Email</label>
        <input type="email" id="email" required />
        <div id="emailFeedback" class="inline-feedback"></div>
      </div>

      <div class="form-group">
        <label>Password</label>
        <input type="password" id="password" required />
        <span class="toggle-password" onclick="togglePassword('password')"></span>
      </div>

      <div class="checkbox-group">
        <input type="checkbox" id="remember" />
        <label for="remember">Remember Me</label>
      </div>

      <a href="#" class="forgot-password">Forgot Password?</a>

      <button type="submit" class="btn">Login</button>
      <div class="spinner" id="spinner"></div>

      <div class="divider">
        <span>or continue with</span>
      </div>

      <div class="input">
        <button id="google-login-btn" class="google-btn">
          <span class="google-logo">
            <svg class="google-icon" viewBox="0 0 533.5 544.3">
              <path fill="#4285F4"
                d="M533.5 278.4c0-18.5-1.6-37.1-5-55.2H272v104.5h146.9c-6.4 34.7-25.7 64.1-54.9 83.5l89 69.4c52-47.8 80.5-118.3 80.5-202.2z" />
              <path fill="#34A853"
                d="M272 544.3c73.6 0 135.4-24.3 180.5-65.9l-89-69.4c-24.7 16.6-56.4 26.2-91.5 26.2-70.4 0-130-47.6-151.3-111.5l-93.6 72.3c43.3 85.1 132.1 147.3 244.9 147.3z" />
              <path fill="#FBBC04"
                d="M120.7 323.7c-10.4-30.7-10.4-63.6 0-94.3L27 157c-40.7 79.7-40.7 172 0 251.7l93.7-72.3z" />
              <path fill="#EA4335"
                d="M272 107.7c38.6-.6 75.5 13.6 104 39.4l77.7-77.7C403.2 23.9 340.2-.2 272 0 159.2 0 70.5 62.2 27.2 147.3l93.6 72.4c21.4-63.9 81-111.5 151.2-112z" />
            </svg>
          </span>
          <span>Sign in with Google</span>
        </button>


        <div class="signup-page">
          <p>Don't have an account? <a href="signup.html"> Sign up</a></p>
        </div>

        <div class="social-buttons">
          <div class="social-btn"><img src="assets/images/instagram.png" width="20%"> Instagram</div>
          <div class="social-btn"><img src="assets/images/twitter.png" width="20%"> Twitter</div>
        </div>
    </form>
  </div>

  <script>
    function togglePassword(id) {
      const input = document.getElementById(id);
      input.type = input.type === "password" ? "text" : "password";
    }

    const form = document.getElementById("Login-form");
    const email = document.getElementById("email");
    const password = document.getElementById("password");
    const emailFeedback = document.getElementById("emailFeedback");
    const spinner = document.getElementById("spinner");

    // Live email validation
    email.addEventListener("input", () => {
      const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      emailFeedback.textContent = regex.test(email.value)
        ? ""
        : "Enter a valid email address";
    });

    form.addEventListener("submit", function (e) {
      e.preventDefault();

      // Final email format check before login
      const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailPattern.test(email.value)) {
        alert("Please enter a valid email.");
        return;
      }

      spinner.style.display = "block";

      // Simulate server check delay
      setTimeout(() => {
        spinner.style.display = "none";

        const storedEmail = localStorage.getItem("email");
        const storedPassword = localStorage.getItem("password");
        const storedUser = JSON.parse(localStorage.getItem("loggedInUser"));

        if (email.value === storedEmail && password.value === storedPassword) {
          // If user profile missing, create minimal one
          if (!storedUser) {
            localStorage.setItem("loggedInUser", JSON.stringify({
              name: email.value.split("@")[0],
              email: storedEmail,
              skills: [],
              courses: [],
              certificates: [],
              profileImage: ""
            }));
          }

          localStorage.setItem("isLoggedIn", "true");

          alert("Login successful!");
          if (localStorage.getItem("isLoggedIn") === "true") {
            window.location.href = "index.html";
          }

        } else {
          alert("Invalid email or password.");
        }

      }, 1000);
    });

  </script>
  <script src="./src/js/navbar.js"></script>
  <script src="./src/js/utils.js"></script>
</body>

</html>